local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local MarketplaceService = game:GetService("MarketplaceService")

local function unequipAllPets()
    local petsFolder = LocalPlayer.petsFolder
    for _, folder in pairs(petsFolder:GetChildren()) do
        if folder:IsA("Folder") then
            for _, pet in pairs(folder:GetChildren()) do
                ReplicatedStorage.rEvents.equipPetEvent:FireServer("unequipPet", pet)
            end
        end
    end
    task.wait(0.1)
end

local function equipPet(petName)
    unequipAllPets()
    task.wait(0.01)
    for _, pet in pairs(LocalPlayer.petsFolder.Unique:GetChildren()) do
        if pet.Name == petName then
            ReplicatedStorage.rEvents.equipPetEvent:FireServer("equipPet", pet)
        end
    end
end

local function findMachine(machineName)
    local machine = workspace.machinesFolder:FindFirstChild(machineName)
    if not machine then
        for _, folder in pairs(workspace:GetChildren()) do
            if folder:IsA("Folder") and folder.Name:find("machines") then
                machine = folder:FindFirstChild(machineName)
                if machine then break end
            end
        end
    end
    return machine
end

local function pressE()
    local vim = game:GetService("VirtualInputManager")
    vim:SendKeyEvent(true, "E", false, game)
    task.wait(0.1)
    vim:SendKeyEvent(false, "E", false, game)
end

local Players = game:GetService("Players")
local player = Players.LocalPlayer

local displayName = player.DisplayName
if not displayName or displayName == "" then
    displayName = player.Name
end

local title = ("SC Booster Version | Welcome %s"):format(displayName)

library = loadstring(game:HttpGet("https://raw.githubusercontent.com/CoronaBlanca/Lxbrxrys/refs/heads/main/Xlxrxxm"))()

local window = library:AddWindow(title, {
    main_color = Color3.fromRGB(204, 0, 255),
    min_size = Vector2.new(500, 600),
    can_resize = true,
})

local mainTab = window:AddTab("Main")

mainTab:AddLabel("{-----Brawl System-----}")

local godModeToggle = false

mainTab:AddSwitch("God Mode Brawl", function(State)
    godModeToggle = State

    if State then
        task.spawn(function()
            while godModeToggle do
                game:GetService("ReplicatedStorage").rEvents.brawlEvent:FireServer("joinBrawl")
                task.wait(0)
            end
        end)
    end
end)

local autoWinBrawlSwitch = mainTab:AddSwitch("Auto Win Brawls", function(bool)
    getgenv().autoWinBrawl = bool
    
    local function equipPunch()
        if not getgenv().autoWinBrawl then return end
        
        local character = game.Players.LocalPlayer.Character
        if not character then return false end
        
        if character:FindFirstChild("Punch") then return true end
        
        local backpack = game.Players.LocalPlayer.Backpack
        if not backpack then return false end
        
        for _, tool in pairs(backpack:GetChildren()) do
            if tool.ClassName == "Tool" and tool.Name == "Punch" then
                tool.Parent = character
                return true
            end
        end
        return false
    end
    
    local function isValidTarget(player)
        if not player or not player.Parent then return false end
        if player == Players.LocalPlayer then return false end
        if whitelist[player.UserId] then return false end
        
        local character = player.Character
        if not character or not character.Parent then return false end
        
        local humanoid = character:FindFirstChild("Humanoid")
        if not humanoid then return false end
        
        if not humanoid.Health or humanoid.Health <= 0 then return false end
        if humanoid:GetState() == Enum.HumanoidStateType.Dead then return false end
        
        local rootPart = character:FindFirstChild("HumanoidRootPart")
        if not rootPart or not rootPart.Parent then return false end
        
        return true
    end
    
    local function isLocalPlayerReady()
        local player = game.Players.LocalPlayer
        if not player then return false end
        
        local character = player.Character
        if not character or not character.Parent then return false end
        
        local humanoid = character:FindFirstChild("Humanoid")
        if not humanoid or humanoid.Health <= 0 then return false end
        
        local leftHand = character:FindFirstChild("LeftHand")
        local rightHand = character:FindFirstChild("RightHand")
        
        return (leftHand ~= nil or rightHand ~= nil)
    end
    
    local function safeTouchInterest(targetPart, localPart)
        if not targetPart or not targetPart.Parent then return false end
        if not localPart or not localPart.Parent then return false end
        
        local success, err = pcall(function()
            firetouchinterest(targetPart, localPart, 0)
            task.wait(0.01)
            firetouchinterest(targetPart, localPart, 1)
        end)
        
        return success
    end
    
    task.spawn(function()
        while getgenv().autoWinBrawl and task.wait(0.5) do
            if not getgenv().autoWinBrawl then break end
            
            if game.Players.LocalPlayer.PlayerGui.gameGui.brawlJoinLabel.Visible then
                game.ReplicatedStorage.rEvents.brawlEvent:FireServer("joinBrawl")
                game.Players.LocalPlayer.PlayerGui.gameGui.brawlJoinLabel.Visible = false
            end
        end
    end)
    
    task.spawn(function()
        while getgenv().autoWinBrawl and task.wait(0.5) do
            if not getgenv().autoWinBrawl then break end
            equipPunch()
        end
    end)
    
    task.spawn(function()
        while getgenv().autoWinBrawl and task.wait(0.1) do
            if not getgenv().autoWinBrawl then break end
            
            if isLocalPlayerReady() and game.ReplicatedStorage.brawlInProgress.Value then
                local player = game.Players.LocalPlayer
                pcall(function() player.muscleEvent:FireServer("punch", "rightHand") end)
                pcall(function() player.muscleEvent:FireServer("punch", "leftHand") end)
            end
        end
    end)
    
    task.spawn(function()
        while getgenv().autoWinBrawl and task.wait(0.05) do
            if not getgenv().autoWinBrawl then break end
            
            if isLocalPlayerReady() and game.ReplicatedStorage.brawlInProgress.Value then
                local character = game.Players.LocalPlayer.Character
                local leftHand = character:FindFirstChild("LeftHand")
                local rightHand = character:FindFirstChild("RightHand")
                
                for _, player in pairs(Players:GetPlayers()) do
                    if not getgenv().autoWinBrawl then break end
                    
                    pcall(function()
                        if isValidTarget(player) then
                            local targetRoot = player.Character.HumanoidRootPart
                            
                            if leftHand then
                                safeTouchInterest(targetRoot, leftHand)
                            end
                            
                            if rightHand then
                                safeTouchInterest(targetRoot, rightHand)
                            end
                        end
                    end)
                    
                    task.wait(0.01)
                end
            end
        end
    end)
    
    task.spawn(function()
        local lastPlayerCount = 0
        local stuckCounter = 0
        
        while getgenv().autoWinBrawl and task.wait(1) do
            if not getgenv().autoWinBrawl then break end
            
            local currentPlayerCount = #Players:GetPlayers()
            
            if currentPlayerCount ~= lastPlayerCount then
                stuckCounter = 0
                lastPlayerCount = currentPlayerCount
            else
                stuckCounter = stuckCounter + 1
                
                if stuckCounter > 5 then
                    stuckCounter = 0
                    
                    pcall(function()
                        local character = game.Players.LocalPlayer.Character
                        if character and character:FindFirstChild("Punch") then
                            character.Punch.Parent = game.Players.LocalPlayer.Backpack
                            task.wait(0.1)
                            equipPunch()
                        else
                            equipPunch()
                        end
                    end)
                end
            end
        end
    end)
end)

mainTab:AddSwitch("Auto Join Brawls", function(bool)
    getgenv().autoJoinBrawl = bool
    if bool then
        task.spawn(function()
            while getgenv().autoJoinBrawl and task.wait(0.5) do
                if not getgenv().autoJoinBrawl then break end
                pcall(function()
                    if game.Players.LocalPlayer.PlayerGui.gameGui.brawlJoinLabel.Visible then
                        game.ReplicatedStorage.rEvents.brawlEvent:FireServer("joinBrawl")
                        game.Players.LocalPlayer.PlayerGui.gameGui.brawlJoinLabel.Visible = false
                    end
                end)
            end
        end)
    end
end)

mainTab:AddLabel("{-----Misc-----}")

-- Remove Ad Portals
mainTab:AddButton("Remove Ad Portal", function()
    if workspace:FindFirstChild("GameTeleportPortals") then
        workspace.GameTeleportPortals:Destroy()
    end
    if workspace:FindFirstChild("RobloxAdBoards") then
        workspace.RobloxAdBoards:Destroy()
    end
    if workspace:FindFirstChild("RobloxForwardPortals") then
        workspace.RobloxForwardPortals:Destroy()
    end
end)

-- Disable Trade
mainTab:AddButton("Disable Trade", function()
    ReplicatedStorage.rEvents.tradingEvent:FireServer("disableTrading")
end)

-- Walk on Water
mainTab:AddButton("Walk on Water", function()
    local basePosition = Vector3.new(2048, 0, 2048)
    local gridSize = 20
    local spacing = 0
    
    for x = -gridSize, gridSize do
        for z = -gridSize, gridSize do
            local part = Instance.new("Part")
            part.Parent = workspace
            part.Anchored = true
            part.Position = Vector3.new(x * (basePosition.X + spacing), -9, z * (basePosition.Z + spacing))
            part.Size = basePosition
            part.Transparency = 0
        end
    end
end)

-- Anti Knockback
local bodyVelocity = nil
local connections = {}

local function setupAntiKnockback()
    local character = LocalPlayer.Character
    if character then
        local humanoid = character:WaitForChild("Humanoid")
        local rootPart = character:WaitForChild("HumanoidRootPart")
        
        bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        bodyVelocity.MaxForce = Vector3.new(100000, 0, 100000)
        bodyVelocity.Parent = rootPart
        
        table.insert(connections, rootPart:GetPropertyChangedSignal("Velocity"):Connect(function()
            if _G.antiKnockback then
                rootPart.Velocity = Vector3.new(0, rootPart.Velocity.Y, 0)
            end
        end))
        
        table.insert(connections, humanoid:GetPropertyChangedSignal("PlatformStand"):Connect(function()
            if _G.antiKnockback and humanoid.PlatformStand then
                humanoid.PlatformStand = false
            end
        end))
    end
end

local function cleanupAntiKnockback()
    if bodyVelocity then
        bodyVelocity:Destroy()
        bodyVelocity = nil
    end
    for _, connection in ipairs(connections) do
        connection:Disconnect()
    end
    connections = {}
end

mainTab:AddSwitch("Anti Knockback", function(enabled)
    _G.antiKnockback = enabled
    if enabled then
        setupAntiKnockback()
    else
        cleanupAntiKnockback()
    end
end)

LocalPlayer.CharacterAdded:Connect(function()
    if _G.antiKnockback then
        setupAntiKnockback()
    end
end)

mainTab:AddSwitch("Hide Pets", function(enabled)
    if enabled then
        ReplicatedStorage.rEvents.showPetsEvent:FireServer("hidePets")
    else
        ReplicatedStorage.rEvents.showPetsEvent:FireServer("showPets")
    end
end)

mainTab:AddLabel("{-----Teleport-----}")

-- Teleport Locations
local locations = {
    ["Beach"] = Vector3.new(-13, 5, 134),
    ["Legends"] = Vector3.new(4609, 989, -3903),
    ["Mythical"] = Vector3.new(2250, 5.2, 1073),
    ["Frost"] = Vector3.new(-2623, 5, -409),
    ["Inferno"] = Vector3.new(-6758, 5, -1284),
    ["King"] = Vector3.new(-8625, 15, -5730),
    ["Tiny"] = Vector3.new(-32, 5, 1897),
    ["Secret"] = Vector3.new(1954, -0.2, 6182),
    ["Desert Brawl"] = Vector3.new(908, 103, -7016),
    ["Beach Brawl"] = Vector3.new(-1812, 103, -5914),
    ["Magma Brawl"] = Vector3.new(4517, 103, -8420),
    ["Fortune Wheel"] = Vector3.new(-2611, 3, 5768)
}

local selectedLocation = nil
local dropdown = mainTab:AddDropdown("Select Location", function(location)
    selectedLocation = locations[location]
end)

for name, _ in pairs(locations) do
    dropdown:Add(name)
end

mainTab:AddButton("Teleport", function()
    if selectedLocation then
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            character.HumanoidRootPart.CFrame = CFrame.new(selectedLocation)
        end
    end
end)

mainTab:AddLabel("{-----Scripts Externals-----}")

mainTab:AddButton("Infinite Yield", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
end)

mainTab:AddButton("Anti AFK", function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-AntiAFK-script-18076"))()
end)

mainTab:AddButton("Permanent Shiftlock", function()
	loadstring(game:HttpGet("https://pastebin.com/raw/CjNsnSDy"))()
end)

mainTab:AddButton("All Emotes", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/7yd7/Hub/refs/heads/Branch/GUIS/Emotes.lua"))()
end)

local farmTab = window:AddTab("Farm")

local boostTab = window:AddTab("Boost")

local statsTab = window:AddTab("Stats")

local killerTab = window:AddTab("Killing")

local creditsTab = window:AddTab("Credits")


